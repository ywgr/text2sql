# TEXT2SQL系统版本说明

## 📋 版本概览

### 🔹 1.0版本 - 稳定版
**文件**: `text2sql_v1.0.py` 或 `text2sql_local_deepseek.py`

#### 核心功能
- ✅ **SQLite数据库**: 本地文件数据库支持
- ✅ **双AI架构**: Vanna向量检索 + DeepSeek验证生成
- ✅ **业务规则管理**: 可视化编辑术语映射和业务规则
- ✅ **提示词管理**: 自定义AI提示词模板
- ✅ **ChromaDB**: 本地向量知识库
- ✅ **智能验证**: SQL自动验证和修正

#### 适用场景
- 🎓 学习和研究
- 🧪 功能测试和验证
- 🏠 个人项目和小型应用
- 📚 教学演示

#### 技术特点
- 轻量级部署
- 快速启动
- 稳定可靠
- 易于理解

---

### 🔹 2.0版本 - 企业版
**文件**: `text2sql_v2.0.py`

#### 新增功能
- 🆕 **多数据库支持**: SQLite + MSSQL
- 🆕 **企业级连接**: 支持生产环境MSSQL
- 🆕 **数据库管理**: 可视化数据库配置和管理
- 🆕 **表结构管理**: 表导入、删除、测试连接
- 🆕 **双知识库系统**:
  - 表结构知识库 (表和字段备注)
  - 产品知识库 (基于[group]表的业务逻辑)
- 🆕 **知识库编辑**: 可视化编辑表和字段说明
- 🆕 **配置持久化**: 企业级配置管理

#### 继承功能 (来自1.0)
- ✅ 双AI架构
- ✅ 业务规则管理
- ✅ 提示词管理
- ✅ ChromaDB向量库

#### 适用场景
- 🏢 企业生产环境
- 📊 大型数据库查询
- 🔗 多系统集成
- 👥 团队协作

#### 技术特点
- 企业级架构
- 多数据库支持
- 丰富的管理功能
- 可扩展设计

---

## 🚀 启动方式

### 方法1: 使用启动器 (推荐)
```bash
python start_text2sql.py
```
- 自动检查依赖
- 版本选择界面
- 一键启动

### 方法2: 直接启动
```bash
# 启动1.0版本
streamlit run text2sql_v1.0.py

# 启动2.0版本  
streamlit run text2sql_v2.0.py
```

### 方法3: 简化启动
```bash
# 使用原有的简化启动脚本
python simple_start.py
```

---

## 📦 依赖要求

### 1.0版本依赖
```
streamlit>=1.28.0
vanna>=0.7.9
pandas>=2.0.0
plotly>=5.15.0
chromadb>=0.4.0
openai>=1.0.0
requests>=2.31.0
```

### 2.0版本额外依赖
```
pyodbc>=4.0.0          # MSSQL连接
sqlalchemy>=2.0.0      # 数据库抽象层
```

### 系统要求
- **1.0版本**: Python 3.8+
- **2.0版本**: Python 3.8+ + ODBC Driver 17 for SQL Server

---

## 🔄 升级路径

### 从1.0升级到2.0
1. **备份配置**: 自动继承1.0版本配置
2. **安装依赖**: `pip install pyodbc sqlalchemy`
3. **启动2.0**: 运行`python start_text2sql.py`选择2.0版本

### 配置迁移
- ✅ **自动迁移**: 业务规则、提示词模板
- 🔧 **需要配置**: 数据库连接、表结构知识库
- 📊 **新功能**: 产品知识库需要重新配置

---

## 🎯 选择建议

### 选择1.0版本，如果您:
- 🎓 正在学习TEXT2SQL技术
- 🧪 需要快速验证功能
- 🏠 个人项目或小型应用
- 📚 用于教学演示
- 💻 只需要SQLite数据库

### 选择2.0版本，如果您:
- 🏢 企业生产环境使用
- 📊 需要连接MSSQL数据库
- 👥 团队协作和知识管理
- 🔗 多数据库集成需求
- 📈 需要企业级功能

---

## 📞 技术支持

### 常见问题
1. **依赖安装失败**: 检查Python版本和网络连接
2. **数据库连接失败**: 验证连接参数和网络访问
3. **启动失败**: 检查端口占用和权限问题

### 获取帮助
- 📖 查看详细文档: `README_v2.0.md`
- 🔧 运行诊断: `python debug_system.py`
- 🧪 测试功能: `python test_local_system.py`

---

**选择适合您需求的版本，开始智能数据查询之旅！** 🚀